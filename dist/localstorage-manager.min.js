"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var LocalStorageCache=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"0";_classCallCheck(this,a),this._cacheName=b||"ls-cache",this._userName=c}return _createClass(a,[{key:"getCache",value:function d(a){var b=this.cache,c=b[a];return c||null}},{key:"open",value:function b(a){return new CacheManager(a,this.cacheName)}},{key:"putCache",value:function f(a,b){var c=this.cache;c[a]=b;var d=this.allCache,e=this.userName;d[e]=c,window.localStorage.setItem(this.cacheName,JSON.stringify(d))}},{key:"cache",get:function c(){var a=this.allCache,b=this.userName;return a[b]||{}}},{key:"allCache",get:function a(){return JSON.parse(window.localStorage.getItem(this.cacheName))||{}}},{key:"cacheName",get:function a(){return this._cacheName}},{key:"userName",get:function a(){return this._userName},set:function b(a){this._userName=a}}]),a}(),CacheManager=function(a){function b(a,c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));d._name=a;var e=d.cache;return d._result=e[d.name]||{},d}return _inherits(b,a),_createClass(b,[{key:"put",value:function d(a,b){a||(a="default");var c=this.result;c[a]={data:b,time:new Date},this._result=c,this.update()}},{key:"get",value:function d(a){var b=this.result,c=b[a];return c?c:null}},{key:"clear",value:function a(){this._result={},this.update()}},{key:"update",value:function a(){this.putCache(this.name,this._result)}},{key:"delete",value:function b(a){a&&(delete this._result[a],this.update())}},{key:"timeDiff",value:function k(a){var b=this.get(a);if(!b)return null;var c=b.time?b.time:null;if(c){var d=new Date(c).getTime(),e=new Date().getTime(),f=(e-d)/1e3,g=f/60,h=g/60,i=h/24,j=i/30;return{secondsAgo:f,minutesAgo:g,hoursAgo:h,daysAgo:i,monthsAgo:j,yearsAgo:j/12}}return null}},{key:"name",get:function a(){return this._name}},{key:"result",get:function b(){var a=this.cache;return this._result=a[this.name]||{},this._result}}]),b}(LocalStorageCache);(function(){"function"==typeof define&&define.amd?define("TimeDiff",function(){return LocalStorageCache}):"undefined"!=typeof module&&module.exports?module.exports=LocalStorageCache:window.TimeDiff=LocalStorageCache})();
